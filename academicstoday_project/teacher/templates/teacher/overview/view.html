{% extends 'teacher/base.html' %}
{% load staticfiles %}
{% block content %}

<div id="page-wrapper">

    <div class="container-fluid">

        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">
                    Overview
                    <small>Teacher's Course Overview Page</small>
                </h1>
                <ol class="breadcrumb">
                    <li>
                        <i class="fa fa-university"></i>  <a href="../../../courses">Courses</a>
                    </li>
                    <li>
                        <i class="fa fa-compass"></i> {{ course.title }}
                    </li>
                    <li class="active">
                        <i class="fa fa-sitemap"></i> Overview
                    </li>
                </ol>

            </div>
        </div>
        <!-- /.row -->

        <!-- Submit course for Review -->
        {% if review == None %}
        <div class="jumbotron">
            <h1>Course Registration</h1>
                <p>To have your course available on AcademicsToday, you must first submit your course for review. We will look over it and either accept it or provide feedback on how to improve the course before release.</p>
                <p>Please not illegal stuff will be outrightly rejected.</p>
                <p><a onclick="ajax_submit_course();" class="btn btn-primary btn-lg" role="button">Submit for Review Â»</a>
            </p>
        </div>
        {% endif %}
        <!-- /.row -->

        <!-- Registrar Status Information -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-university"></i> Registrar Status Information</h3>
                    </div>
                    <div class="panel-body">
                        <h2>Course Requirements</h2>
                        <p>These requirements must be met to be considered acceptable course by the registrar</p>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>Requirement</th>
                                        <th>Needs</th>
                                        <th>Meets Requirement</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% if announcements.count >= 1 %}
                                    <tr class="success">
                                        <td>Announcements</td>
                                        <td>1 Announcement</td>
                                        <td>Yes</td>
                                    </tr>
                                {% else %}
                                    <tr class="danger">
                                        <td>Announcements</td>
                                        <td>1 Announcement</td>
                                        <td>No</td>
                                    </tr>
                                {% endif %}

                                {% if syllabus == None %}
                                    <tr class="danger">
                                        <td>Syllabus</td>
                                        <td>1 PDF Document</td>
                                        <td>No</td>
                                    </tr>
                                {% else %}
                                    <tr class="success">
                                        <td>Syllabus</td>
                                        <td>1 PDF Document</td>
                                        <td>Yes</td>
                                </tr>
                                {% endif %}

                                {% if policy == None %}
                                    <tr class="danger">
                                        <td>Grades and Policy</td>
                                        <td>1 PDF Document</td>
                                        <td>No</td>
                                    </tr>
                                {% else %}
                                    <tr class="success">
                                        <td>Grades and Policy</td>
                                        <td>1 PDF Document</td>
                                        <td>Yes</td>
                                    </tr>
                                {% endif %}

                                {% if lectures.count >= 2 %}
                                    <tr class="success">
                                        <td>Lectures</td>
                                        <td>2 Lectures</td>
                                        <td>Yes</td>
                                    </tr>
                                {% else %}
                                    <tr class="danger">
                                        <td>Lectures</td>
                                        <td>2 Lectures</td>
                                        <td>No</td>
                                    </tr>
                                {% endif %}

                                {% if assignments.count >= 2 %}
                                    <tr class="success">
                                        <td>Assignments</td>
                                        <td>1 Assignment</td>
                                        <td>Yes</td>
                                    </tr>
                                {% else %}
                                    <tr class="danger">
                                        <td>Assignments</td>
                                        <td>1 Assignment</td>
                                        <td>No</td>
                                    </tr>
                                {% endif %}

                                {% if quizzes.count >= 1 %}
                                    <tr class="success">
                                        <td>Quizzes</td>
                                        <td>2 Quizzes</td>
                                        <td>Yes</td>
                                    </tr>
                                {% else %}
                                    <tr class="danger">
                                        <td>Quizzes</td>
                                        <td>2 Quizzes</td>
                                        <td>No</td>
                                        <td></td>
                                    </tr>
                                {% endif %}

                                {% if exams.count >= 1 %}
                                    <tr class="success">
                                        <td>Exams</td>
                                        <td>1 Exam</td>
                                        <td>Yes</td>
                                    </tr>
                                {% else %}
                                    <tr class="danger">
                                        <td>Exams</td>
                                        <td>1 Exam</td>
                                        <td>No</td>
                                    </tr>
                                {% endif %}
                                </tbody>
                            </table>
                        </div>
                        {% if review != None %}
                        <h2>Review Status</h2>
                        <p>These requirements must be met to be considered acceptable course by the registrar</p>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>Submission Date</th>
                                        <th>Status</th>
                                        <th>Message</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{ review.submission_date }}</td>
                                        <td>
                                        {% if review.status == COURSE_SUBMITTED_FOR_REVIEW_STATUS %}
                                            Waiting for Review
                                        {% elif review.status == COURSE_IN_REVIEW_STATUS %}
                                            In Review
                                        {% elif review.status == COURSE_REJECTED_STATUS %}
                                            Rejected
                                        {% elif review.status == COURSE_AVAILABLE_STATUS %}
                                            Accepted
                                        {% elif review.status == COURSE_AVAILABLE_STATUS %}
                                            Unavailable
                                        {% else %}
                                            Unknown State
                                        {% endif %}
                                        </td>
                                        <td>{{ review.from_reviewer }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <!-- /.row -->

    </div>

</div>
<!-- Modal -->
<div id="ajax_syllabus_modal"
   name="ajax_syllabus_modal"></div>
<!-- end modal -->

<script>
    function ajax_submit_course()
    {
        var url = 'submit_course_for_review';

        $.ajax( url, {
               data: {
                    'csrfmiddlewaretoken': '{{ csrf_token }}',
               },
               type: 'post',
               success: function(result) {
                    // success code execution here
                    if (result.status == 'success')
                    {
                        refresh_page();
                    }
               },
               error: function(xhr,status,error) {
                    // error code here
               },
               complete: function(xhr,status) {
                    // completion code here
               }
        });
    }

    /**
     *  Function makes the current tab refresh the page.
     */
    function refresh_page()
    {
        window.location = '{{ tab }}';
    }
    </script>


{% endblock content %}
